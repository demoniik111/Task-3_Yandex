# Задание 3

Мобилизация.Гифки – сервис для поиска гифок в перерывах между занятиями.

Сервис написан с использованием [bem-components](https://ru.bem.info/platform/libs/bem-components/5.0.0/).

Работа избранного в оффлайне реализована с помощью технологии [Service Worker](https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers).

Для поиска изображений используется [API сервиса Giphy](https://github.com/Giphy/GiphyAPI).

В браузерах, не поддерживающих сервис-воркеры, приложение так же должно корректно работать, 
за исключением возможности работы в оффлайне.

## Структура проекта

  * `gifs.html` – точка входа
  * `assets` – статические файлы проекта
  * `vendor` –  статические файлы внешних библиотек
  * `service-worker.js` – скрипт сервис-воркера

Открывать `gifs.html` нужно с помощью локального веб-сервера – не как файл. 
Это можно сделать с помощью встроенного в WebStorm/Idea веб-сервера, с помощью простого сервера
из состава PHP или Python. Можно воспользоваться и любым другим способом.

## Ход мышления

ServiceWorker для меня не знаком, так что первостепенная задача – узнать, что он из себя представляет и как с ним правильно работать. 
Ознакомившись с технологией, понял, что `scope сервис-вокера не видит дальше location`. Соответственно эту проблему нужно решить. Я решил её путем перемещения `service-worker.js` в корень сайта. Это не решило бы проблему, если бы не был прописан путь для регистрации сервис-вокера в файле `blocks.js`.

Наткнулся на функцию `needStoreForOffline()`. Помогла еще и подсказка в коде в виде вопроса. По названию и содержмому не трудно догадаться, что функция необходима для офлайн режима. Обратил внимание, что в данной функции не сохраняется `gifs.html`. После добавления, решилась проблема загрузки основного документа при отсутствии сети. 

Осталось проверить где используется данная функция. Проверка показала, что данная функция вызывается на этапе `fetch`. Более детальная разборка данного прослушивателя событий `fetch` дала понять, что проблема невозможности обновления HTML страницы, связана с условием в данном лиснере.

### На вопросы ответил в коде.
